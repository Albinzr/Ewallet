<!DOCTYPE html>
<html>
<head>
	<title> Transaction page </title>
	 
	     <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

	 <link href="css/bootstrap.min.css" rel="stylesheet">
	 <script src="./js/jquery-3.2.0.min.js"></script>
	 <script src="js/bootstrap.min.js"></script>

	
	<!-- 
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>

  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
 

	 <script src="./js/jquery.toast.min.js"></script>
	<link rel="stylesheet" href="./css/jquery.toast.min.css"/>
	<link rel="stylesheet" href="./css/jquery.toast.min.css"/> -->


	<style> 

	.dropbtn {
    background-color: #0080ff;
    border-radius: 10px;
    color: white;
    padding: 16px;
    font-size: 16px;
    border: none;
    cursor: pointer;
    padding-right: 20px;
    padding-left: 20px;
	}

	.dropbtn:hover, .dropbtn:focus {
	    background-color: #00bfff;
	}

	.dropdown {
	    position: relative;
	    display: inline-block;
	}

	.dropdown-content {
	    display: none;
	    position: absolute;
	    background-color: #f9f9f9;
	    min-width: 160px;
	    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
	    z-index: 1;
	}

	.dropdown-content a {
	    color: black;
	    padding: 12px 16px;
	    text-decoration: none;
	    display: block;
	}

	.dropdown-content a:hover {background-color: #f1f1f1}

	.show {display:block;}


	.qdiv {
	  display:none;
	}


	.panel{
		margin-left:auto;
		margin-right:auto;
	}
		
	button{
		padding-right: 20px;
		padding-left: 20px; 
		margin: 10px 10px 10px 10px;
	}	

	</style>
	<script type="text/javascript">

	$(document).on("click","#a_user",function(e){
		 sendq(1);
	 });

	$(document).on("click","#sbtn2",function(e){
		sendq(2);
	});

	$(document).on("click","#sbtn3",function(e){
		sendq(3);
	});

	$(document).on("click","#l_user",function(e){
		sendq(4);
	});

	$(document).on("click","#m_user",function(e){
		sendq(5);
	});

	$(document).on("click","#sbtn4",function(e){
		sendq(6);
	});

	function sendq(a){
		console.log('Ive been summoned');
	if(a == 1){
		$.ajax({
		  		url: "/uqueries",
		  		data: {"q": a},
		  		type: "POST", 
		  		success: function(result){
		  			console.log(result.length);
		  			console.log(result[0].fullname);
		  			disp(1);
		  			for(var i = 0; i< result.length; i++){
	        		$("#query1").append('<p>' +result[i].fullname+'</p>');
	        		}
	    	}});
	}
	else if(a==2){
		c_amt = document.getElementById('c_amt').value;

		$.ajax({
		  	url: "/uqueries",
		  	data: {"q": a, "c_amt" : c_amt},
		  	type: "POST", 
		  	success: function(result){
		  		console.log(result.length);
		  		console.log(result[0].fullname);
		  		disp(2);
		  		$("#query2").append('<div style="margin-top:15px" style="qdiv well">');
		  		for(var i = 0; i< result.length; i++){
	        	$("#query2").append('<p>' +result[i].fullname+'</p>');
	        	}
	        	$("#query2").append('</div>');

		    }
	});
	}

	else if(a==3){
		t_no = document.getElementById('t_no').value;

		$.ajax({
		  	url: "/uqueries",
		  	data: {"q": a, "t_no" : t_no },
		  	type: "POST", 
		  	success: function(result){
		  		console.log(result.length);
		  		console.log(result[0].fullname);
		  		disp(3);
		  		$("#query3").append('<div style="margin-top:15px" style="qdiv well">');
		  		for(var i = 0; i< result.length; i++){
	        	$("#query3").append('<p>' +result[i].fullname+'</p>');
	        	}
	        	$("#query3").append('</div>');

		    }
	});
	}

	else if(a == 4){
		$.ajax({
		  		url: "/uqueries",
		  		data: {"q": a},
		  		type: "POST", 
		  		success: function(result){
		  			console.log(result.length);
		  			console.log(result[0].fullname, result[0].Amt_Total);
		  			disp(4);
		  			for(var i = 0; i< result.length; i++){
	        		$("#query4").append('<p>' +result[i].fullname + ' : Rs ' + result[i].Amt_Total + '</p>');
	        		}
	    	}});
	}

	else if(a == 5){
		$.ajax({
		  		url: "/uqueries",
		  		data: {"q": a},
		  		type: "POST", 
		  		success: function(result){
		  			console.log(result.length);
		  			console.log(result[0].fullname, result[0].Amt_Total);
		  			disp(5);
		  			for(var i = 0; i< result.length; i++){
	        		$("#query5").append('<p>' +result[i].fullname + ' : Rs' + result[i].Amt_Total + '</p>');
	        		}
	    	}});
	}

	else if(a==6){
		var b_name = document.getElementById('b_name').value;

		$.ajax({
		  	url: "/uqueries",
		  	data: {"q": a, "b_name" : b_name },
		  	type: "POST", 
		  	success: function(result){
		  		console.log(result.length);
		  		console.log(result[0].fullname);
		  		disp(6);
		  		$("#query6").append('<div style="margin-top:15px" style="qdiv well">');
		  		for(var i = 0; i< result.length; i++){
	        	$("#query6").append('<p>' +result[i].fullname+'</p>');
	        	}
	        	$("#query6").append('</div>');

		    }
	});
	}

	/*	if(a==1){
		  	bus_amount = document.getElementById('busamt').value;
		  	console.log(bus_amount);	
		  	$.ajax({
		  		url: "/uqueries",
		  		data: {"bus": bus_amount},
		  		type: "POST", 
		  		success: function(result){
		  			console.log(result);
		  			disp(1);
	        	$("#query1").html(result);
	    	}});
		}
*/
	}

	function disp(k){
	  var qdivs = document.getElementsByClassName("qdiv");

	  for (i = 0; i < qdivs.length; i++) {
	      var hidediv = qdivs[i];
	      hidediv.style.display= "none";

	    }

	    ele = "query"+ k;  
	    //console.log(ele);          
	    document.getElementById(ele).style.display = "block";   
	}

	function drop_menu(){      

	    var dropdowns = document.getElementsByClassName("dropdown-content");
	    var i;
	    for (i = 0; i < dropdowns.length; i++) {
	      var openDropdown = dropdowns[i];
	      if (openDropdown.classList.contains('show')) {
	        openDropdown.classList.remove('show');
	      }
	      else{
	      	document.getElementById("myDropdown").classList.add("show");

	      }
	    }
	}

	window.onclick = function(event) {
	  if (!event.target.matches('.dropbtn')) {

	    var dropdowns = document.getElementsByClassName("dropdown-content");
	    var i;
	    for (i = 0; i < dropdowns.length; i++) {
	      var openDropdown = dropdowns[i];
	      if (openDropdown.classList.contains('show')) {
	        openDropdown.classList.remove('show');
	      }
	    }
	  }
	}
		
			//insert functions here
		

	</script>
</head>
<body>

<div class="container-fluid text-center well cols-md-8" style="vertical-align: middle">
	<h3 style="padding-bottom:10px"> Welcome to our payment portal! </h3>
	
	<div class="dropdown">
  <button onclick="drop_menu()" class="dropbtn">  Learn more about our users </button>
  <div id="myDropdown" class="dropdown-content">
    <a href="#" id="a_user" onclick="disp(1)"> Most active users! </a>
    <a href="#" onclick="disp(2)"> Coupon usage </a>
    <a href="#" onclick="disp(3)"> Number of transactions made by our users </a>
    <a href="#" id="l_user" onclick="disp(4)"> Largest transaction made till date</a>
    <a href="#" id="m_user" onclick="disp(5)"> Smallest transaction made till date</a>
    <a href="#" onclick="disp(6)"> Find users with coupons from your favourite shops </a>

  </div>
</div>
<!--You can have more than one drop down menu button if there are seperate categories for your queries (eg. employee information queries, menu queries) -->

<!-- Divs for displaying queries (will be hidden initially) -->
</br>
</br>

<div class="row">
<div class="container-fluid">

  <div id="query1" class="well qdiv">
   		<h3> Most active users!</h3>
   		<br>
  </div>

  <div id="query2" class="qdiv">
 	<h3> Coupon usage </h3>
 	<br>
  <span>
   <div style="width: 40%; margin-left:auto; margin-right:auto" class="form-group">
   <label> <h4> Find users who have used coupons worth more than</h4>  </label>
		    <input id="c_amt" type="number" class="form-control" >
	<button id="sbtn2" class="btn btn-success"> Go! </button>
	</div>
   </span>
  </div>
  <div id="query3" class="qdiv">
  <h3> Number of transactions made by our users </h3>
	 <br>
  	<span>
   <div style="width: 40%; margin-left:auto; margin-right:auto" class="form-group">
   <label> <h4> User's who have made more than  <input id="t_no" type="number" class="form-control"> transactions </h4> </label>		   
	</div>
	<button id="sbtn3" class="btn btn-success"> Go! </button>
   </span>

  </div>

  <div id="query4" class="qdiv">
	<h3> Largest transaction made till date </h3>
	<br>
  </div>

  <div id="query5" class="qdiv">
  	<h3> Smallest transaction made till date </h3>
  	<br>
  </div>

  <div id="query6" class="qdiv">
  	<h3> Find users with coupons from your favourite shops </h3>
  	<br>

  <span>
   <div style="width: 40%; margin-left:auto; margin-right:auto" class="form-group">
   <label> <h4> User's who have used coupons from </h4>  </label>
		    <input id="b_name" type="text" value="Dover park Hospice" class="form-control" >
	<button id="sbtn4" class="btn btn-success"> Go! </button>
	</div>
   </span>
  </div>
  
</div>
</div>


	</br>
	
	<!--Payment -->
	

</div>
</body>
</html>
